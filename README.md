# philosophers
***
- 42 3서클 과제  [https://cdn.intra.42.fr/pdf/pdf/115372/en.subject.pdf]

## 문제 설명   
1. 한 명 이상의 철학자가 둥근 테이블에 둘러 앉아있고, 각자 포크를 하나씩 가지고 있다.  
2. 그들은 반복적으로 먹고, 생각하고, 잔다. 동시에 두 개 이상의 행위는 불가능하다.  
3. 그들은 양 손에 포크를 하나씩 쥐고 있어야 식사를 할 수 있다.  
4. 식사를 마치면 포크를 내려놓고, 잠을 자기 시작한다.  
5. 일어나면 다시 생각하기를 반복한다. 시뮬레이션은 그들이 아사할 때 중단된다.  
6. 철학자들 끼리는 소통할 수 없고, 모두가 굶어선 안 된다.  

### Mandatiry Part  
1. 각각의 철학자들은 스레드로 구현되어야 한다.
2. 한 쌍의 철학자 사이에는 하나의 포크가 존재하고, 한 명의 철학자만 있는 경우에는 하나의 포크만 존재한다.
3. mutex를 이용하여 포크 복사를 방지해라.

### Bonus Part
1. 모든 포크는 테이블 중앙에 위치한다.
2. 사용할 수 있는 포크 정보는 samaphore에 의해 표현된다.
3. 각각의 철학자들은 프로세스로 구현된다. 하지만 부모 프로세스는 철학자가 아니다.

## 필요한 개념
1. Data Race
  - Race condition : 현재 작업이 제어할 수 없는 또다른 작업과의 진행 순서, 즉 타이밍에 따라 결과가 달라져 여러 결과를 만들어낼 수 있는 바람직하지 않은 상황
  - Data race : 다른 곳에서 읽을 가능성이 있는 어떤 메모리 위치에 쓰기 작업을 하는 것, 특히 그것이 위험한 상황
  - data race는 race condition의 부분집합이다.
  - Data Race는 2개 이상의 다른 스레드가 동시성을 통해 같은 데이터에 접근하고 그 중 하나 이상이 값을 수정하는 경우 일어날 수 있다.
    
2. 스레드
  - 프로세스 내에서 실제로 작업을 수행하는 주체. 모든 프로세느는 한 개 이상의 스레드가 존재하여 작업을 수행
  - 두 개 이상의 스레드를 가지는 프로세스를 멀티스레드 프로세스라고 한다.
  - 프로세스 : 실행중인 프로그램. 운영체제에 의해 메모리 공간을 할당받아 실행중인 것

3. mutex
  - 공유된 자원의 데이터 혹은 임계영역 등에 하나의 프로세스 또는 스레드가 접근하는 것을 막아줌(대상이 하나)
  - 임계구역을 가진 스레드들의 실행시간이 서로 겹치지 않고 각각 단독으로 실행되도록 하는 기술입니다.
  - key를 기반으로 한 상호배제 기법으로 key에 해당하는 어떤 객제가 있는데 이 객체를 소유한 스레드/프로세스만이 공유자원에 접근 가능
  - 동기화 또는 락을 사용함으로써 뮤텍스 객체를 두 스레드가 동시에 사용할 수 없다.

4. samaphore
  - 공유된 자원의 데이터 혹은 임계영역 등에 하나의 프로세스 또는 스레드가 접근하는 것을 막아줌(대상이 하나 이상)
  - 공유 자원에 접근할 수 있는 프로세스의 최대 허용치만큼 동시에 사용자가 접근할 수 있으며, 각 프로세스는 세마포어의 값을 확인하고 변경할 수 있다.

***
## 구현 방식
### 1. Mandatory
1 .인원수만큼 스레드를 만들고 각각 초기화한 철학자 구조체를 넘겨준다.  
2. 각각의 스레드는 열심히 먹으면서 카운트를 증가시키고, 굶어 죽는다면 flag를 변경한다.  
3. 모니터링 스레드는 계속해서 동작하면서 누구 하나가 죽거나, 다 최소 먹어야하는 양만큼 먹는다면 순서대로 모두 죽인다.  
